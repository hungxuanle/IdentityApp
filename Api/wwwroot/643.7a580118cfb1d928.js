"use strict";(self.webpackChunkWebAPP=self.webpackChunkWebAPP||[]).push([[643],{7643:(Te,w,c)=>{c.r(w),c.d(w,{AccountModule:()=>Ze});var d=c(6895),b=c(5861),e=c(1571),s=c(433),p=c(5698);class y{constructor(o,t,r){this.accessToken=o,this.userId=t,this.provider=r}}var F=c(1816),f=c(9479),m=c(8184),h=c(5423),_=c(8860);const I=["googleButton"];function A(i,o){1&i&&(e.TgZ(0,"span",23),e._uU(1," Username is required "),e.qZA())}function S(i,o){1&i&&(e.TgZ(0,"span",23),e._uU(1," Password is required "),e.qZA())}function E(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.resendEmailConfirmationLink())}),e._uU(1," Click here to resend email confirmation link in case you didn't receive it. "),e.qZA()}}function J(i,o){if(1&i&&(e.TgZ(0,"div",24),e._UZ(1,"app-validation-messages",25),e.YNc(2,E,2,0,"a",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("errorMessages",t.errorMessages),e.xp6(1),e.Q6J("ngIf",t.errorMessages[0].includes("Please confirm your email"))}}let B=(()=>{class i{constructor(t,r,n,a,l,u,g){this.accountService=t,this.formBuilder=r,this.router=n,this.activatedRoute=a,this.sharedService=l,this._renderer2=u,this._document=g,this.googleButton=new e.SBq({}),this.loginForm=new s.cw({}),this.submitted=!1,this.errorMessages=[],this.returnUrl=null,this.accountService.user$.pipe((0,p.q)(1)).subscribe({next:Z=>{Z?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:v=>{v&&(this.returnUrl=v.get("returnUrl"))}})}})}ngOnInit(){this.initiazeGoogleButton(),this.initializeForm()}ngAfterViewInit(){const t=this._renderer2.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async="true",t.defer="true",this._renderer2.appendChild(this._document.body,t)}initializeForm(){this.loginForm=this.formBuilder.group({userName:["",s.kI.required],password:["",s.kI.required]})}login(){this.submitted=!0,this.errorMessages=[],this.loginForm.valid&&this.accountService.login(this.loginForm.value).subscribe({next:t=>{this.router.navigateByUrl(this.returnUrl?this.returnUrl:"/")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}})}loginWithFacebook(){var t=this;FB.login(function(){var r=(0,b.Z)(function*(n){n.authResponse?t.accountService.loginWithThirdParty(new y(n.authResponse.accessToken,n.authResponse.userID,"facebook")).subscribe({next:()=>{t.router.navigateByUrl(t.returnUrl?t.returnUrl:"/")},error:u=>{t.sharedService.showNotification(!1,"Failed",u.error)}}):t.sharedService.showNotification(!1,"Failed","Unable to login with your facebook")});return function(n){return r.apply(this,arguments)}}())}resendEmailConfirmationLink(){this.router.navigateByUrl("/account/send-email/resend-email-confirmation-link")}initiazeGoogleButton(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:"473473414260-dvfr4pp0jaipd3h86i283q3te3c6kp8m.apps.googleusercontent.com",callback:this.googleCallBack.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signin_with",logo_alignment:"center"})}}googleCallBack(t){var r=this;return(0,b.Z)(function*(){const n=(0,F.Z)(t.credential);r.accountService.loginWithThirdParty(new y(t.credential,n.sub,"google")).subscribe({next:a=>{r.router.navigateByUrl(r.returnUrl?r.returnUrl:"/")},error:a=>{r.sharedService.showNotification(!1,"Failed",a.error)}})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(s.qu),e.Y36(m.F0),e.Y36(m.gz),e.Y36(h.F),e.Y36(e.Qsj),e.Y36(d.K0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],viewQuery:function(t,r){if(1&t&&e.Gf(I,7),2&t){let n;e.iGM(n=e.CRH())&&(r.googleButton=n.first)}},decls:37,vars:8,consts:[[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["formControlName","userName","type","text","placeholder","Username (your email address)",1,"form-control"],["for","userName"],["class","text-danger",4,"ngIf"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["for","password"],["class","form-floatin",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"mt-4","text-center"],["routerLink","/account/send-email/forgot-username-or-password",1,"btn","btn-link"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-4"],[1,"col-4","text-center"],[1,"d-flex","justify-content-between","my-3"],["googleButton",""],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-link",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"form",3),e.NdJ("ngSubmit",function(){return r.login()}),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Login"),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"input",7),e.TgZ(9,"label",8),e._uU(10,"Username (your email address)"),e.qZA(),e.YNc(11,A,2,0,"span",9),e.qZA(),e.TgZ(12,"div",6),e._UZ(13,"input",10),e.TgZ(14,"label",11),e._uU(15,"Password"),e.qZA(),e.YNc(16,S,2,0,"span",9),e.qZA(),e.YNc(17,J,3,2,"div",12),e.TgZ(18,"div",13)(19,"button",14),e._uU(20,"Log in"),e.qZA()()(),e.TgZ(21,"div",15)(22,"a",16)(23,"h6"),e._uU(24,"Forgot username or password"),e.qZA()()(),e.TgZ(25,"div",17)(26,"div",18),e._UZ(27,"hr"),e.qZA(),e.TgZ(28,"div",19),e._uU(29,"OR Login using"),e.qZA(),e.TgZ(30,"div",18),e._UZ(31,"hr"),e.qZA()(),e.TgZ(32,"div",20),e._UZ(33,"div",null,21),e.TgZ(35,"button",22),e.NdJ("click",function(){return r.loginWithFacebook()}),e._uU(36," Facebook "),e.qZA()()()()()),2&t){let n,a,l,u;e.xp6(3),e.Q6J("formGroup",r.loginForm),e.xp6(5),e.ekj("is-invalid",r.submitted&&(null==(n=r.loginForm.get("userName"))?null:n.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(a=r.loginForm.get("userName"))?null:a.hasError("required"))),e.xp6(2),e.ekj("is-invalid",r.submitted&&(null==(l=r.loginForm.get("userName"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(u=r.loginForm.get("password"))?null:u.hasError("required"))),e.xp6(1),e.Q6J("ngIf",r.errorMessages.length>0)}},dependencies:[d.O5,m.yS,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.s]}),i})();const P=["googleButton"];function Y(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," First name is required "),e.qZA())}function M(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," First name must be at least 3, and maximum 15 characters "),e.qZA())}function R(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Middle name must be maximum 15 characters "),e.qZA())}function L(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Last name is required "),e.qZA())}function Q(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Last name must be at least 3, and maximum 15 characters "),e.qZA())}function j(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Email is required "),e.qZA())}function z(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Invalid email address "),e.qZA())}function G(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Password is required "),e.qZA())}function W(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1," Password must be at least 6, and maximum 15 characters "),e.qZA())}function O(i,o){if(1&i&&(e.TgZ(0,"div",28),e._UZ(1,"app-validation-messages",29),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}let $=(()=>{class i{constructor(t,r,n,a,l,u){this.accountService=t,this.formBuilder=r,this.router=n,this.sharedService=a,this._renderer2=l,this._document=u,this.googleButton=new e.SBq({}),this.registerForm=new s.cw({}),this.submitted=!1,this.errorMessages=[],this.accountService.user$.pipe((0,p.q)(1)).subscribe({next:g=>{g&&this.router.navigateByUrl("/")}})}ngOnInit(){this.initiazeGoogleButton(),this.initializeForm()}ngAfterViewInit(){const t=this._renderer2.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async="true",t.defer="true",this._renderer2.appendChild(this._document.body,t)}initializeForm(){this.registerForm=this.formBuilder.group({firstName:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(15)]],lastName:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(15)]],middleName:["",[s.kI.required,s.kI.minLength(0),s.kI.maxLength(15)]],email:["",[s.kI.required,s.kI.pattern("^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$")]],password:["",[s.kI.required,s.kI.minLength(6),s.kI.maxLength(15)]]})}register(){this.submitted=!0,this.errorMessages=[],this.registerForm.valid&&this.accountService.register(this.registerForm.value).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}})}registerWithFacebook(){var t=this;FB.login(function(){var r=(0,b.Z)(function*(n){n.authResponse?t.router.navigateByUrl(`/account/register/third-party/facebook?access_token=${n.authResponse.accessToken}&userId=${n.authResponse.userID}`):t.sharedService.showNotification(!1,"Failed","Unable to register with your facebook")});return function(n){return r.apply(this,arguments)}}())}initiazeGoogleButton(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:"473473414260-dvfr4pp0jaipd3h86i283q3te3c6kp8m.apps.googleusercontent.com",callback:this.googleCallBack.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signup_with",logo_alignment:"center"})}}googleCallBack(t){var r=this;return(0,b.Z)(function*(){const n=(0,F.Z)(t.credential);r.router.navigateByUrl(`/account/register/third-party/google?access_token=${t.credential}&userId=${n.sub}`)})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(s.qu),e.Y36(m.F0),e.Y36(h.F),e.Y36(e.Qsj),e.Y36(d.K0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&e.Gf(P,7),2&t){let n;e.iGM(n=e.CRH())&&(r.googleButton=n.first)}},decls:54,vars:21,consts:[[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"text-danger"],[1,"form-floating","mb-3"],["formControlName","firstName","type","text","placeholder","First name",1,"form-control"],["for","firstName"],["class","text-danger",4,"ngIf"],["formControlName","middleName","type","text","placeholder","Middle name",1,"form-control"],["for","middleName"],["formControlName","lastName","type","text","placeholder","Last name",1,"form-control"],["for","lastName"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["for","password"],["class","form-floatin",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-4"],[1,"col-4","text-center"],[1,"d-flex","justify-content-between","my-3"],["googleButton",""],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"form",3),e.NdJ("ngSubmit",function(){return r.register()}),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6," Let's Get Started to "),e.TgZ(7,"span",6),e._uU(8,"Play"),e.qZA()()(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"First name"),e.qZA(),e.YNc(13,Y,2,0,"span",10),e.YNc(14,M,2,0,"span",10),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"input",11),e.TgZ(17,"label",12),e._uU(18,"Middle name"),e.qZA(),e.YNc(19,R,2,0,"span",10),e.qZA(),e.TgZ(20,"div",7),e._UZ(21,"input",13),e.TgZ(22,"label",14),e._uU(23,"Last name"),e.qZA(),e.YNc(24,L,2,0,"span",10),e.YNc(25,Q,2,0,"span",10),e.qZA(),e.TgZ(26,"div",7),e._UZ(27,"input",15),e.TgZ(28,"label",16),e._uU(29,"Email"),e.qZA(),e.YNc(30,j,2,0,"span",10),e.YNc(31,z,2,0,"span",10),e.qZA(),e.TgZ(32,"div",7),e._UZ(33,"input",17),e.TgZ(34,"label",18),e._uU(35,"Password"),e.qZA(),e.YNc(36,G,2,0,"span",10),e.YNc(37,W,2,0,"span",10),e.qZA(),e.YNc(38,O,2,1,"div",19),e.TgZ(39,"div",20)(40,"button",21),e._uU(41,"Create Account"),e.qZA()()(),e.TgZ(42,"div",22)(43,"div",23),e._UZ(44,"hr"),e.qZA(),e.TgZ(45,"div",24),e._uU(46,"OR Sign up using"),e.qZA(),e.TgZ(47,"div",23),e._UZ(48,"hr"),e.qZA()(),e.TgZ(49,"div",25),e._UZ(50,"div",null,26),e.TgZ(52,"button",27),e.NdJ("click",function(){return r.registerWithFacebook()}),e._uU(53," Facebook "),e.qZA()()()()()),2&t){let n,a,l,u,g,Z,v,T,C,k,U,N,q,x;e.xp6(3),e.Q6J("formGroup",r.registerForm),e.xp6(7),e.ekj("is-invalid",r.submitted&&(null==(n=r.registerForm.get("firstName"))?null:n.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(a=r.registerForm.get("firstName"))?null:a.hasError("required"))),e.xp6(1),e.Q6J("ngIf",r.submitted&&(null==(l=r.registerForm.get("firstName"))?null:l.hasError("minlength"))||(null==(l=r.registerForm.get("firstName"))?null:l.hasError("maxlength"))),e.xp6(2),e.ekj("is-invalid",r.submitted&&(null==(u=r.registerForm.get("middleName"))?null:u.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(g=r.registerForm.get("middleName"))?null:g.hasError("maxlength"))),e.xp6(2),e.ekj("is-invalid",r.submitted&&(null==(Z=r.registerForm.get("lastName"))?null:Z.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(v=r.registerForm.get("lastName"))?null:v.hasError("required"))),e.xp6(1),e.Q6J("ngIf",r.submitted&&(null==(T=r.registerForm.get("lastName"))?null:T.hasError("minlength"))||(null==(T=r.registerForm.get("lastName"))?null:T.hasError("maxlength"))),e.xp6(2),e.ekj("is-invalid",r.submitted&&(null==(C=r.registerForm.get("email"))?null:C.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(k=r.registerForm.get("email"))?null:k.hasError("required"))),e.xp6(1),e.Q6J("ngIf",r.submitted&&(null==(U=r.registerForm.get("email"))?null:U.hasError("pattern"))),e.xp6(2),e.ekj("is-invalid",r.submitted&&(null==(N=r.registerForm.get("password"))?null:N.errors)),e.xp6(3),e.Q6J("ngIf",r.submitted&&(null==(q=r.registerForm.get("password"))?null:q.hasError("required"))),e.xp6(1),e.Q6J("ngIf",r.submitted&&(null==(x=r.registerForm.get("password"))?null:x.hasError("minlength"))||(null==(x=r.registerForm.get("password"))?null:x.hasError("maxlength"))),e.xp6(1),e.Q6J("ngIf",r.errorMessages.length>0)}},dependencies:[d.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.s]}),i})();function H(i,o){1&i&&(e.TgZ(0,"div",1)(1,"a",2),e._uU(2," Login "),e.qZA()())}function K(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"a",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resendEmailConfirmationLink())}),e._uU(2," Click here to resend email confirmation link "),e.qZA()()}}let X=(()=>{class i{constructor(t,r,n,a){this.accountService=t,this.sharedService=r,this.router=n,this.activatedRoute=a,this.success=!0}ngOnInit(){this.accountService.user$.pipe((0,p.q)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:r=>{const n={token:r.get("token"),email:r.get("email")};this.accountService.confirmEmail(n).subscribe({next:a=>{this.sharedService.showNotification(!0,a.value.title,a.value.message)},error:a=>{this.success=!1,this.sharedService.showNotification(!1,"Failed",a.error)}})}})}})}resendEmailConfirmationLink(){this.router.navigateByUrl("/account/send-email/resend-email-confirmation-link")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(h.F),e.Y36(m.F0),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-confirm-email"]],decls:2,vars:2,consts:[["class","container text-center",4,"ngIf"],[1,"container","text-center"],["routerLink","/account/login",1,"btn","btn-primary"],[1,"btn","btn-link",3,"click"]],template:function(t,r){1&t&&(e.YNc(0,H,3,0,"div",0),e.YNc(1,K,3,0,"div",0)),2&t&&(e.Q6J("ngIf",r.success),e.xp6(1),e.Q6J("ngIf",!r.success))},dependencies:[d.O5,m.yS]}),i})();function D(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," Resend email confirmation link "),e.qZA())}function V(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," Retrieve your username or password "),e.qZA())}function ee(i,o){1&i&&(e.TgZ(0,"span",18),e._uU(1," Email is required "),e.qZA())}function te(i,o){1&i&&(e.TgZ(0,"span",18),e._uU(1," Invalid email address "),e.qZA())}function re(i,o){if(1&i&&(e.TgZ(0,"div",19),e._UZ(1,"app-validation-messages",20),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}function ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sendEmail())}),e.TgZ(4,"div",5)(5,"h1",6),e.YNc(6,D,2,0,"span",7),e.YNc(7,V,2,0,"span",7),e.qZA()(),e.TgZ(8,"div",8),e._UZ(9,"input",9),e.TgZ(10,"label",10),e._uU(11,"Email"),e.qZA(),e.YNc(12,ee,2,0,"span",11),e.YNc(13,te,2,0,"span",11),e.qZA(),e.YNc(14,re,2,1,"div",12),e.TgZ(15,"div",13)(16,"div",14)(17,"div",15)(18,"button",16),e._uU(19,"Send"),e.qZA()()(),e.TgZ(20,"div",14)(21,"div",15)(22,"button",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())}),e._uU(23,"Cancel"),e.qZA()()()()()()()()}if(2&i){const t=e.oxw();let r,n,a;e.xp6(3),e.Q6J("formGroup",t.emailForm),e.xp6(3),e.Q6J("ngIf",t.mode.includes("resend-email-confirmation-link")),e.xp6(1),e.Q6J("ngIf",t.mode.includes("forgot-username-or-password")),e.xp6(2),e.ekj("is-invalid",t.submitted&&(null==(r=t.emailForm.get("email"))?null:r.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(n=t.emailForm.get("email"))?null:n.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(a=t.emailForm.get("email"))?null:a.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0)}}let ne=(()=>{class i{constructor(t,r,n,a,l){this.accountService=t,this.sharedService=r,this.formBuilder=n,this.router=a,this.activatedRoute=l,this.emailForm=new s.cw({}),this.submitted=!1,this.errorMessages=[]}ngOnInit(){this.accountService.user$.pipe((0,p.q)(1)).subscribe({next:t=>{if(t)this.router.navigateByUrl("/");else{const r=this.activatedRoute.snapshot.paramMap.get("mode");r&&(this.mode=r,this.initializeForm())}}})}initializeForm(){this.emailForm=this.formBuilder.group({email:["",[s.kI.required,s.kI.pattern("^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$")]]})}sendEmail(){this.submitted=!0,this.errorMessages=[],this.emailForm.valid&&this.mode&&(this.mode.includes("resend-email-confirmation-link")?this.accountService.resendEmailConfirmationLink(this.emailForm.get("email")?.value).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}}):this.mode.includes("forgot-username-or-password")&&this.accountService.forgotUsernameOrPassword(this.emailForm.get("email")?.value).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}}))}cancel(){this.router.navigateByUrl("/account/login")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(h.F),e.Y36(s.qu),e.Y36(m.F0),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-send-email"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",1,"form-signin",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[4,"ngIf"],[1,"form-floating","mb-3"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["class","form-floatin",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","button",1,"btn","btn-block","btn-danger",3,"click"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,r){1&t&&e.YNc(0,ie,24,8,"div",0),2&t&&e.Q6J("ngIf",r.mode)},dependencies:[d.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.s]}),i})();function se(i,o){1&i&&(e.TgZ(0,"span",19),e._uU(1," New Password is required "),e.qZA())}function oe(i,o){1&i&&(e.TgZ(0,"span",19),e._uU(1," New Password must be at least 6, and maximum 15 characters "),e.qZA())}function ae(i,o){if(1&i&&(e.TgZ(0,"div",20),e._UZ(1,"app-validation-messages",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}function le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetPassword())}),e.TgZ(4,"div",5)(5,"h1",6),e._uU(6," Change your password "),e.qZA()(),e.TgZ(7,"div",7),e._UZ(8,"input",8),e.TgZ(9,"label",9),e._uU(10,"Email"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"input",10),e.TgZ(13,"label",11),e._uU(14,"New Password"),e.qZA(),e.YNc(15,se,2,0,"span",12),e.YNc(16,oe,2,0,"span",12),e.qZA(),e.YNc(17,ae,2,1,"div",13),e.TgZ(18,"div",14)(19,"div",15)(20,"div",16)(21,"button",17),e._uU(22,"Change Password"),e.qZA()()(),e.TgZ(23,"div",15)(24,"div",16)(25,"button",18),e._uU(26,"Cancel"),e.qZA()()()()()()()()}if(2&i){const t=e.oxw();let r,n,a;e.xp6(3),e.Q6J("formGroup",t.resetPasswordForm),e.xp6(9),e.ekj("is-invalid",t.submitted&&(null==(r=t.resetPasswordForm.get("newPassword"))?null:r.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(n=t.resetPasswordForm.get("newPassword"))?null:n.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(a=t.resetPasswordForm.get("newPassword"))?null:a.hasError("minlength"))||(null==(a=t.resetPasswordForm.get("newPassword"))?null:a.hasError("maxlength"))),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0)}}let me=(()=>{class i{constructor(t,r,n,a,l){this.accountService=t,this.sharedService=r,this.formBuilder=n,this.router=a,this.activatedRoute=l,this.resetPasswordForm=new s.cw({}),this.submitted=!1,this.errorMessages=[]}ngOnInit(){this.accountService.user$.pipe((0,p.q)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:r=>{this.token=r.get("token"),this.email=r.get("email"),this.token&&this.email?this.initializeForm(this.email):this.router.navigateByUrl("/account/login")}})}})}initializeForm(t){this.resetPasswordForm=this.formBuilder.group({email:[{value:t,disabled:!0}],newPassword:["",[s.kI.required,s.kI.minLength(6),s.kI.maxLength(15)]]})}resetPassword(){if(this.submitted=!0,this.errorMessages=[],this.resetPasswordForm.valid&&this.email&&this.token){const t={token:this.token,email:this.email,newPassword:this.resetPasswordForm.get("newPassword")?.value};this.accountService.resetPassword(t).subscribe({next:r=>{this.sharedService.showNotification(!0,r.value.title,r.value.message),this.router.navigateByUrl("/account/login")},error:r=>{r.error.errors?this.errorMessages=r.error.errors:this.errorMessages.push(r.error)}})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(h.F),e.Y36(s.qu),e.Y36(m.F0),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reset-password"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",1,"form-signin",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["formControlName","newPassword","type","password","placeholder","New Password",1,"form-control"],["for","newPassword"],["class","text-danger",4,"ngIf"],["class","form-floatin",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","button","routerLink","/account/login",1,"btn","btn-block","btn-danger"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,r){1&t&&e.YNc(0,le,27,6,"div",0),2&t&&e.Q6J("ngIf",r.token&&r.email)},dependencies:[d.O5,m.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.s]}),i})();class ue{constructor(o,t,r,n,a){this.firstName=o,this.lastName=t,this.userId=r,this.accessToken=n,this.provider=a}}function ce(i,o){1&i&&(e.TgZ(0,"span",17),e._uU(1," First name is required "),e.qZA())}function ge(i,o){1&i&&(e.TgZ(0,"span",17),e._uU(1," First name must be at least 3, and maximum 15 characters "),e.qZA())}function de(i,o){1&i&&(e.TgZ(0,"span",17),e._uU(1," Last name is required "),e.qZA())}function pe(i,o){1&i&&(e.TgZ(0,"span",17),e._uU(1," Last name must be at least 3, and maximum 15 characters "),e.qZA())}function fe(i,o){if(1&i&&(e.TgZ(0,"div",18),e._UZ(1,"app-validation-messages",19),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("errorMessages",t.errorMessages)}}function he(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.register())}),e.TgZ(4,"div",5)(5,"h3",6),e._uU(6," Creating an account using your "),e.TgZ(7,"span",7),e._uU(8),e.ALo(9,"titlecase"),e.qZA()()(),e.TgZ(10,"div",8),e._UZ(11,"input",9),e.TgZ(12,"label",10),e._uU(13,"First name"),e.qZA(),e.YNc(14,ce,2,0,"span",11),e.YNc(15,ge,2,0,"span",11),e.qZA(),e.TgZ(16,"div",8),e._UZ(17,"input",12),e.TgZ(18,"label",13),e._uU(19,"Last name"),e.qZA(),e.YNc(20,de,2,0,"span",11),e.YNc(21,pe,2,0,"span",11),e.qZA(),e.YNc(22,fe,2,1,"div",14),e.TgZ(23,"div",15)(24,"button",16),e._uU(25,"Create Account"),e.qZA()()()()()()}if(2&i){const t=e.oxw();let r,n,a,l,u,g;e.xp6(3),e.Q6J("formGroup",t.registerForm),e.xp6(5),e.Oqu(e.lcZ(9,11,t.provider)),e.xp6(3),e.ekj("is-invalid",t.submitted&&(null==(r=t.registerForm.get("firstName"))?null:r.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(n=t.registerForm.get("firstName"))?null:n.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(a=t.registerForm.get("firstName"))?null:a.hasError("minlength"))||(null==(a=t.registerForm.get("firstName"))?null:a.hasError("maxlength"))),e.xp6(2),e.ekj("is-invalid",t.submitted&&(null==(l=t.registerForm.get("lastName"))?null:l.errors)),e.xp6(3),e.Q6J("ngIf",t.submitted&&(null==(u=t.registerForm.get("lastName"))?null:u.hasError("required"))),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==(g=t.registerForm.get("lastName"))?null:g.hasError("minlength"))||(null==(g=t.registerForm.get("lastName"))?null:g.hasError("maxlength"))),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0)}}const _e=[{path:"login",component:B},{path:"register",component:$},{path:"confirm-email",component:X},{path:"send-email/:mode",component:ne},{path:"reset-password",component:me},{path:"register/third-party/:provider",component:(()=>{class i{constructor(t,r,n,a){this.accountService=t,this.router=r,this.activatedRoute=n,this.formBuilder=a,this.registerForm=new s.cw({}),this.submitted=!1,this.provider=null,this.access_token=null,this.userId=null,this.errorMessages=[]}ngOnInit(){this.accountService.user$.pipe((0,p.q)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:r=>{this.provider=this.activatedRoute.snapshot.paramMap.get("provider"),this.access_token=r.get("access_token"),this.userId=r.get("userId"),this.provider&&this.access_token&&this.userId&&("facebook"===this.provider||"google"===this.provider)?this.initializeForm():this.router.navigateByUrl("/account/register")}})}})}initializeForm(){this.registerForm=this.formBuilder.group({firstName:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(15)]],lastName:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(15)]]})}register(){if(this.submitted=!0,this.errorMessages=[],this.registerForm.valid&&this.userId&&this.access_token&&this.provider){const t=this.registerForm.get("firstName")?.value,r=this.registerForm.get("lastName")?.value,n=new ue(t,r,this.userId,this.access_token,this.provider);this.accountService.registerWithThirdParty(n).subscribe({next:a=>{this.router.navigateByUrl("/")},error:a=>{a.error.errors?this.errorMessages=a.error.errors:this.errorMessages.push(a.error)}})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(m.F0),e.Y36(m.gz),e.Y36(s.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register-with-third-party"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"text-warning"],[1,"form-floating","mb-3"],["formControlName","firstName","type","text","placeholder","First name",1,"form-control"],["for","firstName"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text","placeholder","Last name",1,"form-control"],["for","lastName"],["class","form-floatin",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"text-danger"],[1,"form-floatin"],[3,"errorMessages"]],template:function(t,r){1&t&&e.YNc(0,he,26,13,"div",0),2&t&&e.Q6J("ngIf",r.provider&&r.access_token&&r.userId)},dependencies:[d.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.s,d.rS]}),i})()}];let ve=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(_e),m.Bz]}),i})();var be=c(4466);let Ze=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,ve,be.m]}),i})()}}]);